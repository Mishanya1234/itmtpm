dXNpbmcgU3RlYW13b3JrczsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOw0KdXNpbmcgU3lzdGVtLk5ldC5IdHRwOw0KdXNpbmcgU3lzdGVtLlRleHQ7DQp1c2luZyBTeXN0ZW07DQp1c2luZyBVbml0eUVuZ2luZTsNCg0KaW50ZXJuYWwgc3RhdGljIGNsYXNzIFRQTSB7DQoJaW50ZXJuYWwgc3RhdGljIGJvb2wgaGF2ZUFjY2VzcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH0NCglpbnRlcm5hbCBzdGF0aWMgZXZlbnQgQWN0aW9uIG9uQWNjZXNzR3JhbnRlZCA9IGRlbGVnYXRlIHsgfTsNCg0KCXByaXZhdGUgY29uc3QgaW50IGFjY2Vzc1RpZXIgPSAyOw0KCXByaXZhdGUgc3RhdGljIE1vZE1ldGFEYXRhIG1ldGFEYXRhOw0KDQoJaW50ZXJuYWwgc3RhdGljIHZvaWQgSW5pdCgpIHsNCgkJbWV0YURhdGEgPSBNb2RBUEkuTWV0YWRhdGE7DQoNCgkJaWYgKFN0ZWFtQ2xpZW50LklzVmFsaWQpIFJlcXVlc3REYXRhKCk7DQoJCWVsc2UgU2hvd0RpYWxvZygiU3RlYW0gaXMgbm90IHJ1bm5pbmciLCAiTWFrZSBzdXJlIHlvdSBoYXZlIFN0ZWFtIHJ1bm5pbmcgYW5kIHlvdSBhcmUgbG9nZ2VkIGluLiIpOw0KCX0NCg0KCXByaXZhdGUgc3RhdGljIGFzeW5jIHZvaWQgUmVxdWVzdERhdGEoKSB7DQoJCXZhciB1cmkgPSAkImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9tb3J6ejFjL2RiL21haW4vZFZOZVJGeHZRbDltUVdkQ1huWmtVMzFiV3c9PS97YWNjZXNzVGllcn0iOw0KCQl0cnkgew0KCQkJdXNpbmcgKHZhciBodHRwID0gbmV3IEh0dHBDbGllbnQoKSkgew0KCQkJCXZhciB0YXNrID0gYXdhaXQgaHR0cC5HZXRBc3luYyh1cmkpOw0KCQkJCXZhciBjb250ZW50ID0gYXdhaXQgdGFzay5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7DQoJCQkJaWYgKHN0cmluZy5Jc051bGxPckVtcHR5KGNvbnRlbnQpKSB7DQoJCQkJCUZhaWwoKTsNCgkJCQl9IGVsc2Ugew0KCQkJCQl2YXIga2V5ID0gIkRiaHNsWnBvVHhSem5GVmoiOw0KCQkJCQl2YXIgYnl0ZXMgPSBDb252ZXJ0LkZyb21CYXNlNjRTdHJpbmcoY29udGVudCk7DQoJCQkJCXZhciBmcm9tQmFzZSA9IEVuY29kaW5nLlVURjguR2V0U3RyaW5nKGJ5dGVzKTsNCgkJCQkJdmFyIGRlY3J5cHRlZCA9ICIiOw0KCQkJCQlmb3IgKGludCBpID0gMDsgaSA8IGZyb21CYXNlLkxlbmd0aDsgaSsrKSB7DQoJCQkJCQlkZWNyeXB0ZWQgKz0gKGNoYXIpKGZyb21CYXNlW2ldIF4ga2V5W2kgJSBrZXkuTGVuZ3RoXSk7DQoJCQkJCX0NCgkJCQkJdmFyIGRhdGEgPSBuZXcgTGlzdDxzdHJpbmc+KCk7DQoJCQkJCWZvciAoaW50IGkgPSAwOyBpIDwgZGVjcnlwdGVkLkxlbmd0aDsgaSArPSAxMCkgew0KCQkJCQkJdmFyIGlkID0gZGVjcnlwdGVkLlN1YnN0cmluZyhpLCAxMCk7DQoJCQkJCQlkYXRhLkFkZChpZCk7DQoJCQkJCX0NCgkJCQkJT25EYXRhUmVjZWl2ZWQoZGF0YSk7DQoJCQkJfQ0KCQkJfQ0KCQl9IGNhdGNoIChFeGNlcHRpb24gZXgpIHsNCgkJCURlYnVnLkxvZ0V4Y2VwdGlvbihleCk7DQoJCQlGYWlsKCk7DQoJCX0NCgl9DQoNCglwcml2YXRlIHN0YXRpYyB2b2lkIE9uRGF0YVJlY2VpdmVkKExpc3Q8c3RyaW5nPiBkYXRhKSB7DQoJCXZhciBzdGVhbUlkID0gU3RlYW1DbGllbnQuU3RlYW1JZC5WYWx1ZS5Ub1N0cmluZygpLlN1YnN0cmluZyg3KTsNCgkJdmFyIGZsYWcgPSBmYWxzZTsNCgkJZm9yZWFjaCAodmFyIGlkIGluIGRhdGEpIHsNCgkJCWlmIChpZCA9PSBzdGVhbUlkKSB7DQoJCQkJZmxhZyA9IHRydWU7DQoJCQkJYnJlYWs7DQoJCQl9DQoJCX0NCg0KCQlpZiAoIWZsYWcpIHsNCgkJCUZhaWwoKTsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCWhhdmVBY2Nlc3MgPSB0cnVlOw0KCQlvbkFjY2Vzc0dyYW50ZWQoKTsNCgl9DQoNCglwcml2YXRlIHN0YXRpYyB2b2lkIEZhaWwoKSA9PiBTaG93RGlhbG9nKCJGYWlsZWQgdG8gdmVyaWZ5IGFjY2VzcyIsICQiPGNvbG9yPXJlZD5Zb3UgbXVzdCBoYXZlIGFuIGFjdGl2ZSBQYXRyZW9uIHRpZXIge2FjY2Vzc1RpZXJ9IHN1YnNjcmlwdGlvbi4gPGNvbG9yPXllbGxvdz5JZiB5b3UgaGF2ZSBvbmUsIHBsZWFzZSB0cnkgdGhlIGZvbGxvd2luZyBzdGVwczpcbjxjb2xvcj13aGl0ZT4xLiBGb2xsb3cgdGhlIGluc3RydWN0aW9ucyBwaW5uZWQgb24gbXkgUGF0cmVvbiBwYWdlIGlmIHlvdSBoYXZlbid0IGFscmVhZHk7XG4yLiBJdCBtYXkgaGF2ZSBiZWVuIDMxIGRheXMgc2luY2UgeW91IGV4ZWN1dGVkICdnYWluLWFjY2VzcycgY29tbWFuZCBvbiBteSBEaXNjb3JkIHNlcnZlciwgc28geW91IG5lZWQgdG8gZXhlY3V0ZSBpdCBhZ2Fpbi4iLA0KCQluZXcgRGlhbG9nQnV0dG9uKCJHbyB0byBQYXRyZW9uIHBhZ2UiLCBmYWxzZSwgWw0KCQkJKCkgPT4gQXBwbGljYXRpb24uT3BlblVSTCgiaHR0cHM6Ly93d3cucGF0cmVvbi5jb20vSW50VGVhbSIpDQoJCV0pLA0KCQluZXcgRGlhbG9nQnV0dG9uKCJHbyB0byBEaXNjb3JkIHNlcnZlciIsIGZhbHNlLCBbDQoJCQkoKSA9PiBBcHBsaWNhdGlvbi5PcGVuVVJMKCJodHRwczovL2Rpc2NvcmQuZ2cvRVN0M1dBelB6WCIpDQoJCV0pLA0KCQluZXcgRGlhbG9nQnV0dG9uKCJPSyIsIHRydWUpKTsNCg0KCXByaXZhdGUgc3RhdGljIHZvaWQgU2hvd0RpYWxvZyhzdHJpbmcgdGl0bGUsIHN0cmluZyBJhsNTEUHYVFAPzMpDSEYNxwmFVxETQoXAxIQFjtNLV5eXyckMC9CQ05INAEdHBYFL1AfBggDTwkyHQBISFkRdlFQC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
